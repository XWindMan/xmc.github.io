---
layout: post
title: 'Android App性能优化'
author: WindMan
date: 2020-05-06
categories: Android
tags: Android 
---
> 本文从最初的编码，编码 中及后的检查，编译，编译后的apk瘦身，对APP的整个产生过程优化。
## 编码优化
+ handler 作为内部类导致内测泄露，由于非静态内部匿名类会持有外部类的引用，可能会导致外部类无法即使释放。
```
public class HandlerActivity extends Activity{

	private static class InnerHandler extends Handler{
		// 持有弱引用
		private final WeakReference<HandlerActivity> mActivity;
		
		public InnerHandler(HandlerActivity activity){
			mActivity = new WeakReference<HandlerActivity>(activity);
		}
		
		@Override
		public void handleMessage(Message msg){
			HandlerActivity activity = mActivity.get();
			if(activity != null){
			}
		}
	}
	
	private final InnerHandler mHandler = new InnerHandler(this);
	
	/*
	* 静态匿名内部类不会持有外部类的引用
	*/
	private static final Runnable runnable = new Runnable(){
	
		@Override
		public void run(){
		}
	};
	
	@Override
	protected void onCreate(Bundle savedInstanceState){
		super.onCreate(savedInstanceState);
		
		//延迟5分子发送消息
		mHandler.postDelayed(runnable, 1000*60*5);
	}
}	

```
## 检查工具lint
[主要参考](http://tools.android.com/tips/lint)
https://blog.csdn.net/luzhenyuxfcy/article/details/79398761
https://blog.csdn.net/qq_34895720/article/details/102859115?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-3



